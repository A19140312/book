#6.1 多线程
###什么是线程安全？
如果你的代码所在的进程中有多个线程在同时运行，而这些线程可能会同时运行这段代码。如果每次运行结果和单线程运行的结果是一样的，而且其他的变量的值也和预期的是一样的，就是线程安全的。 
###什么是进程？什么是线程
* 进程是指在系统中正在运行的一个应用程序；程序一旦运行就是进程，或者更专业化来说：进程是指程序执行时的一个实例。
* 线程是进程的一个实体。

###进程和线程的区别
* 进程拥有独立的堆栈空间和数据段，系统开销比较大；线程拥有独立的堆栈空间，但是共享数据段，开销比较小，切换速度快，效率高。
* 进程之间互不干扰，相互独立；线程共享数据段。
* 线程必定也只能属于一个进程；进程可以拥有多个线程而且至少拥有一个线程
* 线程是调度的基本单位；进程是拥有资源的基本单位。
* 同一进程的中线程的切换不会引起进程的切换；不同进程中进行线程切换会引起进程的切换。

###并行与并发

* 并行：多个cpu实例或者多台机器同时执行一段处理逻辑，是真正的同时。
* 并发：通过cpu调度算法，让用户看上去同时执行，实际上从cpu操作层面不是真正的同时。

###同步
Java中的同步指的是通过人为的控制和调度，保证共享资源的多线程访问成为线程安全，来保证结果的准确。

###线程的生命周期
![线程生命周期](/assets/232002051747387.jpg)
###线程5种基本状态
* **新建状态（New）**：当线程对象对创建后，即进入了新建状态，如：Thread t = new MyThread();

* **就绪状态（Runnable）**：当调用线程对象的start()方法（t.start();），线程即进入就绪状态。处于就绪状态的线程，只是说明此线程已经做好了准备，随时等待CPU调度执行，并不是说执行了t.start()此线程立即就会执行；

* **运行状态（Running）**：当CPU开始调度处于就绪状态的线程时，此时线程才得以真正执行，即进入到运行状态。_（就绪状态是进入到运行状态的唯一入口，也就是说，线程要想进入运行状态执行，首先必须处于就绪状态中；）_

* **阻塞状态（Blocked）**：处于运行状态中的线程由于某种原因，暂时放弃对CPU的使用权，停止执行，此时进入阻塞状态，直到其进入到就绪状态，才 有机会再次被CPU调用以进入到运行状态。根据阻塞产生的原因不同，阻塞状态又可以分为三种：
    * **等待阻塞** -- 运行状态中的线程执行wait()方法，使本线程进入到等待阻塞状态；
    * **同步阻塞** -- 线程在获取synchronized同步锁失败(因为锁被其它线程所占用)，它会进入同步阻塞状态；
    * **其他阻塞** -- 通过调用线程的sleep()或join()或发出了I/O请求时，线程会进入到阻塞状态。当sleep()状态超时、join()等待线程终止或者超时、或者I/O处理完毕时，线程重新转入就绪状态。

* **死亡状态（Dead）**：线程执行完了或者因异常退出了run()方法，该线程结束生命周期。


